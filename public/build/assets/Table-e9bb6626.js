import{W as c,r as s,j as a,a as t,R as u,c as p}from"./app-8dc48a82.js";import{D as L,C as r}from"./column.esm-5020fa19.js";import{I as F}from"./inputtext.esm-231d5aae.js";import{B as i}from"./button.esm-9b8a4c6a.js";import"./portal.esm-b560eca6.js";import"./inputnumber.esm-497debf7.js";import"./dropdown.esm-77c44df1.js";import"./csstransition.esm-713c79d5.js";function A(o){const l=c().props.products,m=c().props.auth.user.role,[h,f]=s.useState("id"),[y,g]=s.useState(-1);s.useEffect(()=>{console.log(l)});const b=e=>{f(e.sortField),g(e.sortOrder)},[P,x]=s.useState(null),_=s.useRef(null),S=e=>t("img",{src:`http://127.0.0.1:8000/uploads/products/${e.product_image}`,alt:e.image,className:"shadow-2 border-round",style:{width:"64px"}}),T=e=>a(u.Fragment,{children:[t(i,{icon:"pi pi-pencil",rounded:!0,outlined:!0,className:"mr-2",onClick:()=>o.editProduct(e)}),m==1&&t(i,{icon:"pi pi-trash",rounded:!0,outlined:!0,severity:"danger",onClick:()=>o.confirmDeleteProduct(e)})]}),N=[{field:"id",header:"ID"},{field:"name",header:"Name"},{field:"email",header:"Email"},{field:"role",header:"Role"}].map(e=>({title:e.header,dataKey:e.field})),C=a("div",{className:"flex flex-wrap gap-2 align-items-center flex-nowrap justify-content-between",children:[a("span",{className:"p-input-icon-left basis-1/4",children:[t("i",{className:"pi pi-search"}),t(F,{type:"search",onInput:e=>x(e.target.value),placeholder:"Search..."})]}),a("div",{className:"flex justify-between gap-3 basis-3/4",children:[t(i,{label:"Export",icon:"pi pi-upload",className:"p-button-help",onClick:()=>{p(()=>import("./jspdf.es.min-bf5b653d.js").then(e=>e.j),["assets/jspdf.es.min-bf5b653d.js","assets/app-8dc48a82.js","assets/app-f786e7d9.css"]).then(e=>{p(()=>import("./jspdf.plugin.autotable-a3777682.js").then(n=>n.j),["assets/jspdf.plugin.autotable-a3777682.js","assets/app-8dc48a82.js","assets/app-f786e7d9.css","assets/jspdf.es.min-bf5b653d.js"]).then(()=>{const n=new e.default(0,0);let d=Math.random();n.autoTable(N,l),n.save("products"+d+".pdf")})})}}),t(i,{label:"New",icon:"pi pi-plus",className:"p-button-help self-end",onClick:o.openNew})]})]}),O=e=>t(u.Fragment,{children:a("span",{children:[" ",e.quantity>5?"INSTOCK":e.quantity<=5&&e.quantity>=1?"LOWSTOCK":"OUTOFSTOCK"]})}),v=e=>a("span",{children:[" ",e.price.toLocaleString("en-PH",{style:"currency",currency:"PHP"})]}),w=e=>{const d=new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return t("span",{style:{textTransform:"capitalize"},children:d})};return a(L,{ref:_,value:l,selection:o.selectedProducts,onSelectionChange:e=>o.setSelectedProducts(e.value),dataKey:"id",paginator:!0,rows:10,rowsPerPageOptions:[5,10,25],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",globalFilter:P,header:C,sortField:h,sortOrder:y,onSort:b,children:[t(r,{selectionMode:"multiple",exportable:!1}),t(r,{field:"product_image",header:"Image",body:S}),t(r,{field:"product_name",header:"Name",sortable:!0,style:{minWidth:"12rem"}}),t(r,{field:"price",header:"Price",sortable:!0,style:{minWidth:"12rem"},body:v}),t(r,{field:"quantity",header:"Total Quantity",sortable:!0,style:{minWidth:"12rem"}}),t(r,{field:"status",header:"Status",sortable:!0,body:O,style:{minWidth:"12rem"}}),t(r,{field:"created_at",header:"Date Added",sortable:!0,style:{minWidth:"2rem"},body:w}),t(r,{body:T,exportable:!1,style:{minWidth:"12rem",display:"flex",gap:"0.5rem"}})]})}export{A as default};
